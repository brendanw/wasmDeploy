!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.common=t():e.common=t()}(globalThis,()=>(()=>{importScripts("sqlite3.js");let e=null;function t(){const t=this.data;switch(t&&t.action){case"exec":if(!t.sql)throw new Error("exec: Missing query string");return postMessage({id:t.id,results:{values:e.exec({sql:t.sql,bind:t.params,returnValue:"resultRows"})}});case"begin_transaction":return postMessage({id:t.id,results:e.exec("BEGIN TRANSACTION;")});case"end_transaction":return postMessage({id:t.id,results:e.exec("END TRANSACTION;")});case"rollback_transaction":return postMessage({id:t.id,results:e.exec("ROLLBACK TRANSACTION;")});case"delete_database":return o(t.id);default:throw console.log(`Unsupported action: ${t&&t.action}`),new Error(`Unsupported action: ${t&&t.action}`)}}function s(e){return!0===e.message?.includes("no such column")?(o(),void self.postMessage({type:"RELOAD_PAGE"})):postMessage({id:this.data.id,error:e})}async function o(){try{e&&(e.close(),e=null);const t=await navigator.storage.getDirectory();await t.removeEntry("database.db")}catch(e){console.error("Error deleting the database:",e)}}if("function"==typeof importScripts){e=null;const o=async function(){const t=await sqlite3InitModule();e=new t.oo1.DB("file:database.db?vfs=opfs","c")}();self.onmessage=e=>o.then(t.bind(e)).catch(s.bind(e))}return{}})());
//# sourceMappingURL=94.js.map